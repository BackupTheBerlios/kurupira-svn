<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Kurupira: /usr/home/iamscared/projects/kurupira/src/console/console_core.c File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.1 -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="modules.html"><span>Modules</span></a></li>
    <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
    <li id="current"><a href="files.html"><span>Files</span></a></li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="files.html"><span>File&nbsp;List</span></a></li>
    <li><a href="globals.html"><span>Globals</span></a></li>
  </ul></div>
<h1>/usr/home/iamscared/projects/kurupira/src/console/console_core.c File Reference</h1><code>#include &lt;stdio.h&gt;</code><br>
<code>#include &lt;stdlib.h&gt;</code><br>
<code>#include &lt;unistd.h&gt;</code><br>
<code>#include &lt;signal.h&gt;</code><br>
<code>#include &lt;readline/readline.h&gt;</code><br>
<code>#include &lt;readline/history.h&gt;</code><br>
<code>#include &lt;libfreedom/libconsole.h&gt;</code><br>
<code>#include &lt;libfreedom/layers.h&gt;</code><br>
<code>#include &quot;<a class="el" href="console__core_8h-source.html">console_core.h</a>&quot;</code><br>

<p>
<a href="console__core_8c-source.html">Go to the source code of this file.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="console__core_8c.html#2b7e157b569bfc6ebc29f32ae647359b">DEFAULT_PROMPT</a>&nbsp;&nbsp;&nbsp;&quot;libfreedom# &quot;</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="console__core_8c.html#309599a3dc636476027c4adffff0433b">PROMPT_FORMAT</a>&nbsp;&nbsp;&nbsp;&quot;libfreedom[%s]# &quot;</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="console__core_8c.html#bb83eb849cec8b444262951cddce829f">PROMPT_MAX_CHARS</a>&nbsp;&nbsp;&nbsp;30</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="console__core_8c.html#08ece339691584d65d00bf936b9dc8a0">EXIT_COMMAND_NAME</a>&nbsp;&nbsp;&nbsp;&quot;exit&quot;</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="console__core_8c.html#ce954d9c20f8976b3c2970f923bb260f">READLINE_NAME</a>&nbsp;&nbsp;&nbsp;&quot;libfreedom&quot;</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="console__core_8c.html#c6d3520311b7a3226385ffde83234569">ROOT_DIRECTORY</a>&nbsp;&nbsp;&nbsp;(-1)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="console__core_8c.html#d214804fae8969bc4a1933642c6d1db4">ROOT_DIRECTORY_SIZE</a>&nbsp;&nbsp;&nbsp;(sizeof(<a class="el" href="console__core_8c.html#3432a0c1ce16aa31ee397e818751dd5e">root_directory_commands</a>)/sizeof(command_t))</td></tr>

<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="console__core_8c.html#c8a85d77b40a124dd87abed9c67af961">strip_whitespaces</a> (char *string)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="console__core_8c.html#6126e8a2beeb1b66860519cf3a93979a">duplicate_string</a> (char *s)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="console__core_8c.html#683d67784f898e6d892d1106f2cdef5c">execute_line</a> (char *line)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static command_t *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="console__core_8c.html#9ec5ad6eeb7c9811e05905eeeadefb34">find_command</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static char **&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="console__core_8c.html#2f784b23984d3bac539f2f6899ea97fc">console_completion</a> (const char *text, int start, int end)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="console__core_8c.html#72bec0f162c26e9f69529d6ecb637ed4">command_generator</a> (const char *text, int state)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="console__core_8c.html#834a93f1a49bcfabed3f9284692f5456">load_commands</a> (int layer_id)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="console__core_8c.html#62b3e552188dc2021715c1be2bd60267">update_prompt</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="console__core_8c.html#ae25ceb046e5058471c09354ec0a96f2">handler_SIGPIPE</a> (int signal)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="console__core_8c.html#4569bfc05eb020e10f9bad347784c6d4">console_initialize</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="console__core_8c.html#6fcfcd3f7c716f07635c489c8fcbe1da">console_loop</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">command_t *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="console__core_8c.html#ad201a6c8b9d70ca7d4a6509008e1862">find_command</a> (char *command_name)</td></tr>

<tr><td colspan="2"><br><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static <a class="el" href="structcommand__list__t.html">command_list_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="console__core_8c.html#cb3c08230b655243300304544b89ba33">console_commands</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="console__core_8c.html#631b0da5227a501ac336ac4a497ac120">current_layer_id</a> = ROOT_DIRECTORY</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static char&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="console__core_8c.html#a12f924b597a4c729555e59a772b39c8">console_prompt</a> [PROMPT_MAX_CHARS+1] = DEFAULT_PROMPT</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static command_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="console__core_8c.html#3432a0c1ce16aa31ee397e818751dd5e">root_directory_commands</a> []</td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Module that reads commands from the user and sends them to the daemon through the libfreedom console library (libconsole). 
<p>
Definition in file <a class="el" href="console__core_8c-source.html">console_core.c</a>.<hr><h2>Define Documentation</h2>
<a class="anchor" name="2b7e157b569bfc6ebc29f32ae647359b"></a><!-- doxytag: member="console_core.c::DEFAULT_PROMPT" ref="2b7e157b569bfc6ebc29f32ae647359b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEFAULT_PROMPT&nbsp;&nbsp;&nbsp;&quot;libfreedom# &quot;          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Default prompt used at the console. 
<p>
Definition at line <a class="el" href="console__core_8c-source.html#l00049">49</a> of file <a class="el" href="console__core_8c-source.html">console_core.c</a>.
<p>
Referenced by <a class="el" href="console__core_8c-source.html#l00371">update_prompt()</a>.
</div>
</div><p>
<a class="anchor" name="08ece339691584d65d00bf936b9dc8a0"></a><!-- doxytag: member="console_core.c::EXIT_COMMAND_NAME" ref="08ece339691584d65d00bf936b9dc8a0" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define EXIT_COMMAND_NAME&nbsp;&nbsp;&nbsp;&quot;exit&quot;          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
The command name used to exit the console. 
<p>
Definition at line <a class="el" href="console__core_8c-source.html#l00064">64</a> of file <a class="el" href="console__core_8c-source.html">console_core.c</a>.
<p>
Referenced by <a class="el" href="console__core_8c-source.html#l00427">command_generator()</a>, and <a class="el" href="console__core_8c-source.html#l00274">execute_line()</a>.
</div>
</div><p>
<a class="anchor" name="309599a3dc636476027c4adffff0433b"></a><!-- doxytag: member="console_core.c::PROMPT_FORMAT" ref="309599a3dc636476027c4adffff0433b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PROMPT_FORMAT&nbsp;&nbsp;&nbsp;&quot;libfreedom[%s]# &quot;          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Expanded prompt used at the console. 
<p>
Definition at line <a class="el" href="console__core_8c-source.html#l00054">54</a> of file <a class="el" href="console__core_8c-source.html">console_core.c</a>.
<p>
Referenced by <a class="el" href="console__core_8c-source.html#l00371">update_prompt()</a>.
</div>
</div><p>
<a class="anchor" name="bb83eb849cec8b444262951cddce829f"></a><!-- doxytag: member="console_core.c::PROMPT_MAX_CHARS" ref="bb83eb849cec8b444262951cddce829f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PROMPT_MAX_CHARS&nbsp;&nbsp;&nbsp;30          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Max number of chars for the expanded identifier. 
<p>
Definition at line <a class="el" href="console__core_8c-source.html#l00059">59</a> of file <a class="el" href="console__core_8c-source.html">console_core.c</a>.
<p>
Referenced by <a class="el" href="console__core_8c-source.html#l00371">update_prompt()</a>.
</div>
</div><p>
<a class="anchor" name="ce954d9c20f8976b3c2970f923bb260f"></a><!-- doxytag: member="console_core.c::READLINE_NAME" ref="ce954d9c20f8976b3c2970f923bb260f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define READLINE_NAME&nbsp;&nbsp;&nbsp;&quot;libfreedom&quot;          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Allow parsing of the ~/.inputrc file . 
<p>
Definition at line <a class="el" href="console__core_8c-source.html#l00069">69</a> of file <a class="el" href="console__core_8c-source.html">console_core.c</a>.
<p>
Referenced by <a class="el" href="console__core_8c-source.html#l00206">console_initialize()</a>.
</div>
</div><p>
<a class="anchor" name="c6d3520311b7a3226385ffde83234569"></a><!-- doxytag: member="console_core.c::ROOT_DIRECTORY" ref="c6d3520311b7a3226385ffde83234569" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ROOT_DIRECTORY&nbsp;&nbsp;&nbsp;(-1)          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Indicates that the console is in "root directory mode". This allow users to choose one layer as entering directories. 
<p>
Definition at line <a class="el" href="console__core_8c-source.html#l00075">75</a> of file <a class="el" href="console__core_8c-source.html">console_core.c</a>.
<p>
Referenced by <a class="el" href="console__core_8c-source.html#l00206">console_initialize()</a>, <a class="el" href="console__core_8c-source.html#l00274">execute_line()</a>, <a class="el" href="console__core_8c-source.html#l00338">load_commands()</a>, and <a class="el" href="console__core_8c-source.html#l00371">update_prompt()</a>.
</div>
</div><p>
<a class="anchor" name="d214804fae8969bc4a1933642c6d1db4"></a><!-- doxytag: member="console_core.c::ROOT_DIRECTORY_SIZE" ref="d214804fae8969bc4a1933642c6d1db4" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ROOT_DIRECTORY_SIZE&nbsp;&nbsp;&nbsp;(sizeof(<a class="el" href="console__core_8c.html#3432a0c1ce16aa31ee397e818751dd5e">root_directory_commands</a>)/sizeof(command_t))          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Constant used to indicate the number of commands that are at the root directory. 
<p>
Definition at line <a class="el" href="console__core_8c-source.html#l00114">114</a> of file <a class="el" href="console__core_8c-source.html">console_core.c</a>.
<p>
Referenced by <a class="el" href="console__core_8c-source.html#l00338">load_commands()</a>, and <a class="el" href="console__core_8c-source.html#l00371">update_prompt()</a>.
</div>
</div><p>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="72bec0f162c26e9f69529d6ecb637ed4"></a><!-- doxytag: member="console_core.c::command_generator" ref="72bec0f162c26e9f69529d6ecb637ed4" args="(const char *text, int state)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char * command_generator           </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>text</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>state</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Used for ReadLine API - Generator function for command completion.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>state</em>&nbsp;</td><td>- let us know whether to start from scratch; without any state (i.e. state == 0), then we start at the top of the list. </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>a completed command name if found, or NULL to determine that there isn't any more similar commands. </dd></dl>

<p>
Definition at line <a class="el" href="console__core_8c-source.html#l00427">427</a> of file <a class="el" href="console__core_8c-source.html">console_core.c</a>.
<p>
References <a class="el" href="console__core_8c-source.html#l00080">console_commands</a>, <a class="el" href="console__core_8c-source.html#l00391">duplicate_string()</a>, <a class="el" href="console__core_8c-source.html#l00064">EXIT_COMMAND_NAME</a>, <a class="el" href="libconsole_8h-source.html#l00062">command_list_t::list</a>, and <a class="el" href="libconsole_8h-source.html#l00063">command_list_t::size</a>.
<p>
Referenced by <a class="el" href="console__core_8c-source.html#l00412">console_completion()</a>.
</div>
</div><p>
<a class="anchor" name="2f784b23984d3bac539f2f6899ea97fc"></a><!-- doxytag: member="console_core.c::console_completion" ref="2f784b23984d3bac539f2f6899ea97fc" args="(const char *text, int start, int end)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char ** console_completion           </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>text</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>start</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>end</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Used for ReadLine API - Attempt to complete on the contents of text parameter.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>start</em>&nbsp;</td><td>- start of rl_line_buffer that contains the word to complete. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>end</em>&nbsp;</td><td>- end of rl_line_buffer that contains the word to complete. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>text</em>&nbsp;</td><td>- is the word to complete. </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>the array of matches, or NULL if there aren't any. </dd></dl>

<p>
Definition at line <a class="el" href="console__core_8c-source.html#l00412">412</a> of file <a class="el" href="console__core_8c-source.html">console_core.c</a>.
<p>
References <a class="el" href="console__core_8c-source.html#l00427">command_generator()</a>.
<p>
Referenced by <a class="el" href="console__core_8c-source.html#l00206">console_initialize()</a>.
</div>
</div><p>
<a class="anchor" name="4569bfc05eb020e10f9bad347784c6d4"></a><!-- doxytag: member="console_core.c::console_initialize" ref="4569bfc05eb020e10f9bad347784c6d4" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void console_initialize           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Initialize console variables. 
<p>
Definition at line <a class="el" href="console__core_8c-source.html#l00206">206</a> of file <a class="el" href="console__core_8c-source.html">console_core.c</a>.
<p>
References <a class="el" href="console__core_8c-source.html#l00412">console_completion()</a>, <a class="el" href="console__core_8c-source.html#l00463">handler_SIGPIPE()</a>, <a class="el" href="console__core_8c-source.html#l00338">load_commands()</a>, <a class="el" href="console__core_8c-source.html#l00069">READLINE_NAME</a>, and <a class="el" href="console__core_8c-source.html#l00075">ROOT_DIRECTORY</a>.
<p>
Referenced by <a class="el" href="console__main_8c-source.html#l00035">main()</a>.
</div>
</div><p>
<a class="anchor" name="6fcfcd3f7c716f07635c489c8fcbe1da"></a><!-- doxytag: member="console_core.c::console_loop" ref="6fcfcd3f7c716f07635c489c8fcbe1da" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void console_loop           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Loop reading and executing lines until the user quits. 
<p>
Definition at line <a class="el" href="console__core_8c-source.html#l00220">220</a> of file <a class="el" href="console__core_8c-source.html">console_core.c</a>.
<p>
References <a class="el" href="console_8h-source.html#l00047">CONSOLE_EXIT</a>, <a class="el" href="console__core_8c-source.html#l00090">console_prompt</a>, <a class="el" href="console__core_8c-source.html#l00274">execute_line()</a>, and <a class="el" href="console__core_8c-source.html#l00256">strip_whitespaces()</a>.
<p>
Referenced by <a class="el" href="console__main_8c-source.html#l00035">main()</a>.
</div>
</div><p>
<a class="anchor" name="6126e8a2beeb1b66860519cf3a93979a"></a><!-- doxytag: member="console_core.c::duplicate_string" ref="6126e8a2beeb1b66860519cf3a93979a" args="(char *s)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char * duplicate_string           </td>
          <td>(</td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>s</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Duplicates a string. This function allocates the new string and return it. So, dispose the returned string after it had been used.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>s</em>&nbsp;</td><td>- string to be copied. </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>the duplicated string. </dd></dl>

<p>
Definition at line <a class="el" href="console__core_8c-source.html#l00391">391</a> of file <a class="el" href="console__core_8c-source.html">console_core.c</a>.
<p>
Referenced by <a class="el" href="console__core_8c-source.html#l00427">command_generator()</a>.
</div>
</div><p>
<a class="anchor" name="683d67784f898e6d892d1106f2cdef5c"></a><!-- doxytag: member="console_core.c::execute_line" ref="683d67784f898e6d892d1106f2cdef5c" args="(char *line)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int execute_line           </td>
          <td>(</td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>line</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Executes a command line.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>line</em>&nbsp;</td><td>- the string typed by the user. It has the command name and may have arguments. </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>CONSOLE_OK if command was successfully executed. CONSOLE_ERROR if the command name doesn't exists. CONSOLE_EXIT if the user had selected the exit command. </dd></dl>

<p>
Definition at line <a class="el" href="console__core_8c-source.html#l00274">274</a> of file <a class="el" href="console__core_8c-source.html">console_core.c</a>.
<p>
References <a class="el" href="console_8h-source.html#l00037">CONSOLE_ERROR</a>, <a class="el" href="console_8h-source.html#l00047">CONSOLE_EXIT</a>, <a class="el" href="console_8h-source.html#l00042">CONSOLE_OK</a>, <a class="el" href="console__core_8c-source.html#l00085">current_layer_id</a>, <a class="el" href="console__core_8c-source.html#l00064">EXIT_COMMAND_NAME</a>, <a class="el" href="console__core_8c.html#9ec5ad6eeb7c9811e05905eeeadefb34">find_command()</a>, <a class="el" href="libconsole_8h-source.html#l00056">LIBCONSOLE_COMMAND_ERROR</a>, <a class="el" href="libconsole_8h-source.html#l00050">LIBCONSOLE_ERROR</a>, <a class="el" href="libconsole_8c-source.html#l00131">libconsole_send_command()</a>, <a class="el" href="console__core_8c-source.html#l00338">load_commands()</a>, and <a class="el" href="console__core_8c-source.html#l00075">ROOT_DIRECTORY</a>.
<p>
Referenced by <a class="el" href="console__core_8c-source.html#l00220">console_loop()</a>.
</div>
</div><p>
<a class="anchor" name="ad201a6c8b9d70ca7d4a6509008e1862"></a><!-- doxytag: member="console_core.c::find_command" ref="ad201a6c8b9d70ca7d4a6509008e1862" args="(char *command_name)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">command_t* find_command           </td>
          <td>(</td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>command_name</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>
Definition at line <a class="el" href="console__core_8c-source.html#l00400">400</a> of file <a class="el" href="console__core_8c-source.html">console_core.c</a>.
<p>
References <a class="el" href="console__core_8c-source.html#l00080">console_commands</a>, <a class="el" href="libconsole_8h-source.html#l00062">command_list_t::list</a>, and <a class="el" href="libconsole_8h-source.html#l00063">command_list_t::size</a>.
</div>
</div><p>
<a class="anchor" name="9ec5ad6eeb7c9811e05905eeeadefb34"></a><!-- doxytag: member="console_core.c::find_command" ref="9ec5ad6eeb7c9811e05905eeeadefb34" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static command_t* find_command           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Return a pointer to the command_t struct related to the command_name. Return a NULL pointer if NAME isn't a registered command name.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>command_name</em>&nbsp;</td><td>- the name of the command to be looked up. </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>the command_t struct related to that command name. </dd></dl>

<p>
Referenced by <a class="el" href="console__core_8c-source.html#l00274">execute_line()</a>.
</div>
</div><p>
<a class="anchor" name="ae25ceb046e5058471c09354ec0a96f2"></a><!-- doxytag: member="console_core.c::handler_SIGPIPE" ref="ae25ceb046e5058471c09354ec0a96f2" args="(int signal)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void handler_SIGPIPE           </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>signal</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Handler for SIGPIPE signals. 
<p>
Definition at line <a class="el" href="console__core_8c-source.html#l00463">463</a> of file <a class="el" href="console__core_8c-source.html">console_core.c</a>.
<p>
Referenced by <a class="el" href="console__core_8c-source.html#l00206">console_initialize()</a>.
</div>
</div><p>
<a class="anchor" name="834a93f1a49bcfabed3f9284692f5456"></a><!-- doxytag: member="console_core.c::load_commands" ref="834a93f1a49bcfabed3f9284692f5456" args="(int layer_id)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void load_commands           </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>layer_id</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Loads the command_t array from a layer and place it at console_commands struct is. If some error occurs, the directory layer_directory_commands are loaded into the console_commands. The variables current_layer_id and console_prompt are updated according to the layer_id actually loaded.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>layer_id</em>&nbsp;</td><td>- the layer to be requested. </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>the id of the layer current loaded. </dd></dl>

<p>
Definition at line <a class="el" href="console__core_8c-source.html#l00338">338</a> of file <a class="el" href="console__core_8c-source.html">console_core.c</a>.
<p>
References <a class="el" href="console__core_8c-source.html#l00080">console_commands</a>, <a class="el" href="console__core_8c-source.html#l00085">current_layer_id</a>, <a class="el" href="libconsole_8h-source.html#l00050">LIBCONSOLE_ERROR</a>, <a class="el" href="libconsole_8c-source.html#l00068">libconsole_load_commands()</a>, <a class="el" href="libconsole_8h-source.html#l00062">command_list_t::list</a>, <a class="el" href="console__core_8c-source.html#l00075">ROOT_DIRECTORY</a>, <a class="el" href="console__core_8c-source.html#l00095">root_directory_commands</a>, <a class="el" href="console__core_8c-source.html#l00114">ROOT_DIRECTORY_SIZE</a>, <a class="el" href="libconsole_8h-source.html#l00063">command_list_t::size</a>, and <a class="el" href="console__core_8c-source.html#l00371">update_prompt()</a>.
<p>
Referenced by <a class="el" href="console__core_8c-source.html#l00206">console_initialize()</a>, and <a class="el" href="console__core_8c-source.html#l00274">execute_line()</a>.
</div>
</div><p>
<a class="anchor" name="c8a85d77b40a124dd87abed9c67af961"></a><!-- doxytag: member="console_core.c::strip_whitespaces" ref="c8a85d77b40a124dd87abed9c67af961" args="(char *string)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char * strip_whitespaces           </td>
          <td>(</td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>string</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Strip whitespace from the start and end of the string. After the last non-whitespace character will be put a '' character.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>string</em>&nbsp;</td><td>- the string to be stripped. </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>a pointer inside the string argument indicating where is the first non-whitespace character. </dd></dl>

<p>
Definition at line <a class="el" href="console__core_8c-source.html#l00256">256</a> of file <a class="el" href="console__core_8c-source.html">console_core.c</a>.
<p>
Referenced by <a class="el" href="console__core_8c-source.html#l00220">console_loop()</a>.
</div>
</div><p>
<a class="anchor" name="62b3e552188dc2021715c1be2bd60267"></a><!-- doxytag: member="console_core.c::update_prompt" ref="62b3e552188dc2021715c1be2bd60267" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void update_prompt           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Updates the console prompt, according to the current_layer_id variable. See DEFAULT_PROMPT and PROMPT_FORMAT constants. 
<p>
Definition at line <a class="el" href="console__core_8c-source.html#l00371">371</a> of file <a class="el" href="console__core_8c-source.html">console_core.c</a>.
<p>
References <a class="el" href="console__core_8c-source.html#l00090">console_prompt</a>, <a class="el" href="console__core_8c-source.html#l00085">current_layer_id</a>, <a class="el" href="console__core_8c-source.html#l00049">DEFAULT_PROMPT</a>, <a class="el" href="console__core_8c-source.html#l00054">PROMPT_FORMAT</a>, <a class="el" href="console__core_8c-source.html#l00059">PROMPT_MAX_CHARS</a>, <a class="el" href="console__core_8c-source.html#l00075">ROOT_DIRECTORY</a>, <a class="el" href="console__core_8c-source.html#l00095">root_directory_commands</a>, and <a class="el" href="console__core_8c-source.html#l00114">ROOT_DIRECTORY_SIZE</a>.
<p>
Referenced by <a class="el" href="console__core_8c-source.html#l00338">load_commands()</a>.
</div>
</div><p>
<hr><h2>Variable Documentation</h2>
<a class="anchor" name="cb3c08230b655243300304544b89ba33"></a><!-- doxytag: member="console_core.c::console_commands" ref="cb3c08230b655243300304544b89ba33" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structcommand__list__t.html">command_list_t</a> <a class="el" href="console__core_8c.html#cb3c08230b655243300304544b89ba33">console_commands</a><code> [static]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
The list with all command_t structs. 
<p>
Definition at line <a class="el" href="console__core_8c-source.html#l00080">80</a> of file <a class="el" href="console__core_8c-source.html">console_core.c</a>.
<p>
Referenced by <a class="el" href="console__core_8c-source.html#l00427">command_generator()</a>, <a class="el" href="console__core_8c-source.html#l00400">find_command()</a>, <a class="el" href="libconsole_8c-source.html#l00068">libconsole_load_commands()</a>, and <a class="el" href="console__core_8c-source.html#l00338">load_commands()</a>.
</div>
</div><p>
<a class="anchor" name="a12f924b597a4c729555e59a772b39c8"></a><!-- doxytag: member="console_core.c::console_prompt" ref="a12f924b597a4c729555e59a772b39c8" args="[PROMPT_MAX_CHARS+1]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char <a class="el" href="console__core_8c.html#a12f924b597a4c729555e59a772b39c8">console_prompt</a>[PROMPT_MAX_CHARS+1] = DEFAULT_PROMPT<code> [static]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
The current console prompt. 
<p>
Definition at line <a class="el" href="console__core_8c-source.html#l00090">90</a> of file <a class="el" href="console__core_8c-source.html">console_core.c</a>.
<p>
Referenced by <a class="el" href="console__core_8c-source.html#l00220">console_loop()</a>, and <a class="el" href="console__core_8c-source.html#l00371">update_prompt()</a>.
</div>
</div><p>
<a class="anchor" name="631b0da5227a501ac336ac4a497ac120"></a><!-- doxytag: member="console_core.c::current_layer_id" ref="631b0da5227a501ac336ac4a497ac120" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="console__core_8c.html#631b0da5227a501ac336ac4a497ac120">current_layer_id</a> = ROOT_DIRECTORY<code> [static]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
The layer id of the current command list. 
<p>
Definition at line <a class="el" href="console__core_8c-source.html#l00085">85</a> of file <a class="el" href="console__core_8c-source.html">console_core.c</a>.
<p>
Referenced by <a class="el" href="console__core_8c-source.html#l00274">execute_line()</a>, <a class="el" href="console__core_8c-source.html#l00338">load_commands()</a>, and <a class="el" href="console__core_8c-source.html#l00371">update_prompt()</a>.
</div>
</div><p>
<a class="anchor" name="3432a0c1ce16aa31ee397e818751dd5e"></a><!-- doxytag: member="console_core.c::root_directory_commands" ref="3432a0c1ce16aa31ee397e818751dd5e" args="[]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">command_t <a class="el" href="console__core_8c.html#3432a0c1ce16aa31ee397e818751dd5e">root_directory_commands</a>[]<code> [static]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<b>Initial value:</b><div class="fragment"><pre class="fragment"> {
        {LAYER_LINK, 
                        <span class="stringliteral">"link"</span>, 
                        <span class="stringliteral">"Changes to link layer directory"</span>}, 
        {LAYER_NET, 
                        <span class="stringliteral">"net"</span>, 
                        <span class="stringliteral">"Changes to net layer directory"</span>},
        {LAYER_UNRELIABLE, 
                        <span class="stringliteral">"unreliable"</span>, 
                        <span class="stringliteral">"Changes to unreliable transport layer directory"</span>},
        {LAYER_RELIABLE, 
                        <span class="stringliteral">"reliable"</span>, 
                        <span class="stringliteral">"Changes to reliable transport layer directory"</span>}
}
</pre></div>This is the command_t list used at the root directory. 
<p>
Definition at line <a class="el" href="console__core_8c-source.html#l00095">95</a> of file <a class="el" href="console__core_8c-source.html">console_core.c</a>.
<p>
Referenced by <a class="el" href="console__core_8c-source.html#l00338">load_commands()</a>, and <a class="el" href="console__core_8c-source.html#l00371">update_prompt()</a>.
</div>
</div><p>
<hr size="1"><address style="align: right;"><small>Generated on Tue Mar 20 00:15:38 2007 for Kurupira by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.1 </small></address>
</body>
</html>
